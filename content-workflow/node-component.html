<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>节点和组件</title>
    <link type="text/css" rel="stylesheet" href="../assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="../assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="../assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="../assets/css/style.css"/>
    <link rel="shortcut icon" type="image/ico" href="../assets/favicon.ico">
  </head>
  <body>
  <div class="full-wrap">
    <div class="sidebar markdown-body">
      <div class="inner">
        <div class="logo">
          <a href="../index.html"><img src="../assets/img/logo.png"></a>
        </div>
        <ul class="nav nav-list">
          <li class="sidebar-header-1 "><h3><a href="../getting-started/index.html">Cocos Creator 入门</a></h3></li>
          <li class=" sidebar-header-3"><a href="../getting-started/introduction.html">关于 Cocos Creator</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/install.html">安装和启动</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/dashboard.html">使用 Dashboard</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/hello-world.html">Hello World!</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/quick-start.html">快速上手: 制作第一个游戏</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/cocos2d-x-guide.html">Cocos2d-x 用户上手指南</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/unity-guide.html">Unity 用户上手指南</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/project-structure.html">项目结构</a></li>
          <li class=" sidebar-header-3"><a href="../getting-started/support.html">获取帮助和支持</a></li>
          <li class="sidebar-header-1 "><h3><a href="../basics/index.html">编辑器基础</a></h3></li>
          <li class=" sidebar-header-3"><a href="../basics/editor-overview.html">编辑器界面介绍</a></li>
          <li class=" sidebar-header-4"><a href="../basics/editor-panels/assets.html">资源管理器</a></li>
          <li class=" sidebar-header-4"><a href="../basics/editor-panels/scene.html">场景编辑器</a></li>
          <li class=" sidebar-header-4"><a href="../basics/editor-panels/hierarchy.html">层级管理器</a></li>
          <li class=" sidebar-header-4"><a href="../basics/editor-panels/inspector.html">属性检查器</a></li>
          <li class=" sidebar-header-4"><a href="../basics/editor-panels/console.html">控制台</a></li>
          <li class=" sidebar-header-3"><a href="../basics/toolbar.html">工具栏</a></li>
          <li class=" sidebar-header-3"><a href="../basics/layout.html">编辑器布局</a></li>
          <li class="sidebar-header-1 "><h3><a href="../asset-workflow/index.html">资源工作流程</a></h3></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/scene-managing.html">创建和管理场景</a></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/sprite.html">图像资源（Texture）</a></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/atlas.html">图集资源（Atlas）</a></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/font.html">字体资源</a></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/particle.html">粒子资源</a></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/audio-asset.html">声音资源（AudioClip）</a></li>
          <li class=" sidebar-header-3"><a href="../asset-workflow/prefab.html">预制资源（Prefab）</a></li>
          <li class="sidebar-header-1 "><h3><a href="index.html">内容创作工作流程</a></h3></li>
          <li class="active sidebar-header-3"><a href="node-component.html">节点和组件</a></li>
          <li class=" sidebar-header-3"><a href="transform.html">坐标系和变换</a></li>
          <li class=" sidebar-header-3"><a href="node-tree.html">管理节点层级和显示顺序</a></li>
          <li class=" sidebar-header-3"><a href="scene-editing.html">使用场景编辑器搭建场景图像</a></li>
          <li class="sidebar-header-1 "><h3><a href="../ui/index.html">UI 系统</a></h3></li>
          <li class=" sidebar-header-3"><a href="../ui/sliced-sprite.html">使用 Sliced Sprite 制作 UI 图像</a></li>
          <li class=" sidebar-header-3"><a href="../ui/multi-resolution.html">多分辨率适配方案</a></li>
          <li class=" sidebar-header-3"><a href="../ui/widget-align.html">对齐策略</a></li>
          <li class=" sidebar-header-3"><a href="../ui/label-layout.html">文字排版</a></li>
          <li class=" sidebar-header-3"><a href="../ui/ui-components.html">常用 UI 控件</a></li>
          <li class=" sidebar-header-3"><a href="../ui/auto-layout.html">自动布局容器</a></li>
          <li class=" sidebar-header-3"><a href="../ui/list-with-data.html">制作动态生成内容的列表</a></li>
          <li class="sidebar-header-1 "><h3><a href="../animation/index.html">动画系统</a></h3></li>
          <li class=" sidebar-header-3"><a href="../animation/animation.html">关于 Animation</a></li>
          <li class=" sidebar-header-3"><a href="../animation/animation-clip.html">创建 Animation 组件和动画剪辑</a></li>
          <li class=" sidebar-header-3"><a href="../animation/animation-curve.html">编辑动画曲线</a></li>
          <li class=" sidebar-header-3"><a href="../animation/sprite-animation.html">编辑序列帧动画</a></li>
          <li class=" sidebar-header-3"><a href="../animation/time-curve.html">编辑时间曲线</a></li>
          <li class=" sidebar-header-3"><a href="../animation/animation-event.html">添加动画事件</a></li>
          <li class=" sidebar-header-3"><a href="../animation/scripting-animation.html">使用脚本控制动画</a></li>
          <li class="sidebar-header-1 "><h3><a href="../components/index.html">组件参考</a></h3></li>
          <li class=" sidebar-header-3"><a href="../components/sprite.html">Sprite 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/label.html">Label 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/animation.html">Animation 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/canvas.html">Canvas 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/widget.html">Widget 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/progress.html">ProgressBar 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/button.html">Button 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/mask.html">Mask 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/scrollview.html">ScrollView 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/scrollbar.html">ScrollBar 组件参考</a></li>
          <li class=" sidebar-header-3"><a href="../components/layout.html">Layout 组件参考</a></li>
          <li class="sidebar-header-1 "><h3><a href="../scripting/index.html">脚本开发工作流程</a></h3></li>
          <li class=" sidebar-header-3"><a href="../scripting/use-component.html">创建和使用组件脚本</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/properties.html">声明属性</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/access-node-component.html">访问节点和其他组件</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/life-cycle-callbacks.html">生命周期回调</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/create-destroy.html">创建和销毁节点</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/events.html">发射和监听事件</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/internal-events.html">系统内置事件</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/actions.html">使用动作系统</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/action-list.html">动作列表</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/scheduler.html">使用计时器</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/execution-order.html">脚本执行顺序</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/pooling.html">使用对象池</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/load-assets.html">获取资源</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/modular-script.html">模块化脚本</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/web-debug-scripts.html">在浏览器中调试脚本</a></li>
          <li class=" sidebar-header-3"><a href="../scripting/javascript-primer.html">JavaScript 快速入门</a></li>
          <li class=" sidebar-header-4"><a href="../scripting/reference/attributes.html">属性参数参考</a></li>
          <li class="sidebar-header-1 "><h3><a href="../publish/index.html">跨平台发布游戏</a></h3></li>
          <li class=" sidebar-header-3"><a href="../publish/publish-web.html">发布到 Web 平台</a></li>
          <li class=" sidebar-header-3"><a href="../publish/cocos-framework.html">安装配置 Cocos Framework</a></li>
          <li class=" sidebar-header-3"><a href="../publish/publish-native.html">打包发布原生平台</a></li>
        </ul>
      </div>
    </div>
    <div class="main">
      <article class="markdown-body"><h1 id="-">节点和组件</h1>
<p>Cocos Creator 的工作流程是以组件式开发为核心的，组件式架构也称作 <strong>组件-实体系统</strong>（或 <a href="https://en.wikipedia.org/wiki/Entity_component_system">Entity-Component System</a>），简单的说，就是以组合而非继承的方式进行实体的构建。</p>
<p>在 Cocos Creator 中，<strong>节点（Node）</strong>是承载组件的实体，我们通过将具有各种功能的 <strong>组件（Component）</strong> 挂载到节点上，来让节点具有各式各样的表现和功能。接下来我们看看如何在场景中创建节点和添加组件。</p>
<h2 id="-node-">创建节点（Node）</h2>
<p>要最快速的获得一个具有特定功能的节点，可以通过 <strong>层级管理器</strong> 左上角的 <strong>创建节点</strong> 按钮。我们以创建一个最简单的 Sprite（精灵）节点为例，点击 <strong>创建节点</strong> 按钮后选择 <code>创建渲染节点/Sprite（精灵）</code>：</p>
<p class="img-container"><img src="node-component/create.png" alt="create"></p>
<p>之后我们就可以在 <strong>场景编辑器</strong> 和 <strong>层级管理器</strong> 中看到新添加的 Sprite 节点了。新节点命名为 <code>New Sprite</code>，表示这是一个主要由 Sprite 组件负责提供功能的节点。您也可以尝试再次点击 <strong>创建节点</strong> 按钮，选择其他的节点类型，可以看到他们的命名和表现会有所不同。</p>
<h2 id="-component-">组件（Component）</h2>
<h3 id="sprite-">Sprite 组件</h3>
<p>我们有了一些节点，现在我们就来看看什么是组件，以及组件和节点的关系。选中我们刚才创建的 <code>New Sprite</code> 节点，可以看到 <strong>属性检查器</strong> 中的显示：</p>
<p class="img-container"><img src="node-component/inspector.png" alt="inspector"></p>
<p><strong>属性检查器</strong> 中以 <code>Node</code> 标题开始的部分就是节点的属性，节点属性包括了节点的位置、旋转、缩放、尺寸等变换信息和锚点、颜色、不透明度等其他信息。我们将在 <a href="./node-properties.html">节点属性</a> 部分进行详细介绍。</p>
<p>接下来以 <code>Sprite</code> 标题开始的部分就是 Sprite 组件的属性，在 2D 游戏中，Sprite 组件负责游戏中绝大部分图像的渲染。Sprite 组件最主要的属性就是 <code>Sprite Frame</code>，我们可以在这个属性指定 Sprite 在游戏中渲染的图像文件。让我们试试从 <strong>资源管理器</strong> 中拖拽任意一张图片资源到 <strong>属性检查器</strong> 的 <code>Sprite Frame</code> 属性中：</p>
<p class="img-container"><img src="node-component/drag_spriteframe.png" alt="drag spriteframe"></p>
<p>可以看到刚才的默认 Sprite 图片变成了我们指定的图片，这就是 Sprite 组件的作用：渲染图片。</p>
<h3 id="-sprite-">节点属性对 Sprite 组件的影响</h3>
<p>节点和 Sprite 组件进行组合之后，就可以通过修改节点属性来控制图片渲染的方式，您可以按照下图中红线标记属性的设置对您的节点进行调整，可以看到图片的旋转、比例、颜色和不透明度都发生了变化：</p>
<p class="img-container"><img src="node-component/change_node_property.png" alt="node property"></p>
<p>我们前面提到了组件式的结构是以组合方式来实现功能的扩展的，下图中就展示了节点和 Sprite 组件的组合。</p>
<p class="img-container"><img src="node-component/node_chart.png" alt="node component relationship"></p>
<h2 id="-color-opacity-">节点颜色（Color）和不透明度（Opacity）属性</h2>
<p>上图中节点的 <strong>颜色（Color）</strong> 属性和 <strong>不透明度（Opacity）</strong> 属性直接影响了 Sprite 组件对图片的渲染。颜色和不透明度同样会影响 <a href="../components/label.html">文字（Label）</a> 这样的渲染组件的显示。</p>
<p>这两个属性会和渲染组件本身的渲染内容进行相乘，来决定每个像素渲染时的颜色和不透明度。此外不透明度（Opacity）属性还会作用于子节点，可以通过修改父节点的 <code>Opacity</code> 轻松实现一组节点内容的淡入淡出效果。</p>
<h2 id="--1">添加其他组件</h2>
<p>在一个节点上可以添加多个组件，来为节点添加更多功能。在上面的例子中，我们可以继续选中 <code>New Sprite</code> 这个节点，点击 <strong>属性检查器</strong> 面板下面的 <strong>添加组件</strong> 按钮，选择 <code>添加 UI 组件/Button</code> 来添加一个 Button（按钮）组件。</p>
<p>之后按照下图对 Button 组件的属性进行设置（具体的颜色属性可以根据爱好自由设置）：</p>
<p class="img-container"><img src="node-component/button_property.png" alt="button property"></p>
<p>接下来点击工具栏上面的 <strong>运行预览</strong> 按钮 <img src="../basics/toolbar/preview.png" alt="preview">，并在浏览器运行窗口中将鼠标悬停在图片上，可以看到图片的颜色发生变化，也就是我们为节点添加的 Button 组件行为生效了！</p>
<h2 id="--2">小结</h2>
<p>上面的例子里，我们先是将 Sprite 组件和节点组合，有了可以指定渲染图片资源的场景图像，接下来我们通过修改节点属性，能够对这个图像进行缩放和颜色等不同方式的显示。现在我们又为这个节点添加了 Button 组件，让这个节点具有了根据按钮的不同状态（普通、悬停、按下等）的行为。这就是 Cocos Creator 中组件式开发的工作流程，我们可以用这样的方式将不同功能组合在一个节点上，实现如主角的移动攻击控制、背景图像的自动卷动、UI 元素的排版和交互功能等等复杂目标。</p>
<p>值得注意的是，一个节点上只能添加一个渲染组件，渲染组件包括 <strong>Sprite（精灵）</strong>， <strong>Label（文字）</strong>，<strong>Particle（粒子）</strong>等。</p>
<h2 id="--3">参考阅读</h2>
<ul class="list">
<li><a href="http://blog.csdn.net/i_dovelemon/article/details/25798677">理解组件-实体系统 - i_dovelemon的博客</a></li>
</ul>
<hr>

<p>继续前往 <a href="./transform.html">坐标系和变换</a> 说明文档。</p>
      </article>
    </div>
  </div>
  <script src="../assets/js/anchor.min.js"></script>
  <script>
    anchors.add('article h2, article h3, article h4');
  </script>
  </body>
</html>
