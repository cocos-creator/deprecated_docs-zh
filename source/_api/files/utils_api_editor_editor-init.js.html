<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>utils/api/editor/editor-init.js - fireball-build</title>
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/vendor/yui-min.js"></script>
</head>
<body>

<div id="doc">
    <header class="main-header">
        <div class="content">
            <div class="project-title">
                <a href="http://docs-zh.fireball-x.com">
                        <img class="logo" src="http://docs-zh.fireball-x.com/images/logo.png" title="fireball-build">
                </a>
                    <h1 class="project-name">fireball-build</h1> <span class="project-version">0.4.0</span>
                    <p class="description">Fireball is the game engine for the future.</p>
            </div>
            <ul class="jump-links">
                <li><a href="#index" class="index-jump-link">index</a></li>
                <li><a href="#top" class="top-jump-link">top</a></li>
            </ul>
        </div>
    </header>
    <div id="bd" class="main-body">

        <div id="docs-sidebar" class="sidebar apidocs"><div id="api-list">
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">类型</a></li>
            <li><a href="#api-modules">模组</a></li>
            <li><a href="#api-enums">枚举</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="输入关键词，过滤API">
        </div>

        <div id="api-tabview-panel">

            <ul id="api-classes" class="apis classes">
                <li>
                    <a class="class" href="../classes/_CallbacksHandler.html">_CallbacksHandler</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/_DeserializeInfo.html">_DeserializeInfo</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/_ObjectFlags.html">_ObjectFlags</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/_Runtime.RenderContext.html">_Runtime.RenderContext</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Animation.html">Animation</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AnimationNode.html">AnimationNode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AnimationNodeBase.html">AnimationNodeBase</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AnimationState.html">AnimationState</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Array.html">Array</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Asset.html">Asset</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AssetBundleBase.html">AssetBundleBase</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AssetLibrary.html">AssetLibrary</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AtlasAsset.html">AtlasAsset</a>
                    <a href="../modules/Fire.Spine.html" class="api-list-item-module">@Fire.Spine</a>
                </li>
                <li>
                    <a class="class" href="../classes/AudioClip.html">AudioClip</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/AudioSource.html">AudioSource</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/BitmapFont.html">BitmapFont</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/BitmapText.html">BitmapText</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/CallbacksInvoker.html">CallbacksInvoker</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Camera.html">Camera</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Color.html">Color</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Component.html">Component</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/ContentStrategyType.html">ContentStrategyType</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/EmitterMode.html">EmitterMode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Engine.html">Engine</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Entity.html">Entity</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/EqualToFrame.html">EqualToFrame</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Event.html">Event</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/EventTarget.html">EventTarget</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/FixedHeight.html">FixedHeight</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/FObject.html">FObject</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/FontFlagType.html">FontFlagType</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/HashObject.html">HashObject</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Input.html">Input</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/InputField.html">InputField</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Intersection.html">Intersection</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/KeyboardEvent.html">KeyboardEvent</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/LoadManager.html">LoadManager</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Matrix23.html">Matrix23</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/ModifierKeyStates.html">ModifierKeyStates</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/MouseEvent.html">MouseEvent</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/NoScale.html">NoScale</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/ParticleSystem.html">ParticleSystem</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Path.html">Path</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Playable.html">Playable</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/PositionType.html">PositionType</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Rect.html">Rect</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Renderer.html">Renderer</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Resources.html">Resources</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/ResourcesBundle.html">ResourcesBundle</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Screen.html">Screen</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Screen.ContainerStrategy.html">Screen.ContainerStrategy</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Screen.ContentStrategy.html">Screen.ContentStrategy</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Skeleton.html">Skeleton</a>
                    <a href="../modules/Fire.Spine.html" class="api-list-item-module">@Fire.Spine</a>
                </li>
                <li>
                    <a class="class" href="../classes/SkeletonDataAsset.html">SkeletonDataAsset</a>
                    <a href="../modules/Fire.Spine.html" class="api-list-item-module">@Fire.Spine</a>
                </li>
                <li>
                    <a class="class" href="../classes/SkeletonRenderer.html">SkeletonRenderer</a>
                    <a href="../modules/Fire.Spine.html" class="api-list-item-module">@Fire.Spine</a>
                </li>
                <li>
                    <a class="class" href="../classes/Sprite.html">Sprite</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/SpriteAnimation.html">SpriteAnimation</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/SpriteAnimationClip.html">SpriteAnimationClip</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/SpriteAnimationState.html">SpriteAnimationState</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/SpriteRenderer.html">SpriteRenderer</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Text.html">Text</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Texture.FilterMode.html">Texture.FilterMode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Texture.Texture.html">Texture.Texture</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Texture.WrapMode.html">Texture.WrapMode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Time.html">Time</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Transform.html">Transform</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/ValueType.html">ValueType</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a class="class" href="../classes/Vec2.html">Vec2</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
            </ul>

            <ul id="api-modules" class="apis modules">
                <li><a class="module" href="../modules/Editor.html">Editor</a></li>
                <li><a class="module" href="../modules/Fire.html">Fire</a></li>
                <li><a class="module" href="../modules/Fire.JS.html">Fire.JS</a></li>
                <li><a class="module" href="../modules/Fire.Spine.html">Fire.Spine</a></li>
                <li><a class="module" href="../modules/Math.html">Math</a></li>
            </ul>

            <ul id="api-enums" class="apis enums">
                <li>
                    <a href="../enums/Fire.KeyCode.html">Fire.KeyCode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/FontType.html">FontType</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/ImageType.html">ImageType</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/SpriteAnimationClip.StopAction.html">SpriteAnimationClip.StopAction</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/SpriteAnimationClip.WrapMode.html">SpriteAnimationClip.WrapMode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/TextAlign.html">TextAlign</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/TextAnchor.html">TextAnchor</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
                <li>
                    <a href="../enums/WrapMode.html">WrapMode</a>
                    <a href="../modules/Fire.html" class="api-list-item-module">@Fire</a>
                </li>
            </ul>
        </div>
    </div>
</div>
</div>

        <div id="docs-main" class="apidocs">
            <div class="content container"><h1 class="file-heading">文件: utils/api/editor/editor-init.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module Editor
 */
//
var Remote = require(&#x27;remote&#x27;);
var Ipc = require(&#x27;ipc&#x27;);
var Util = require(&#x27;util&#x27;);
var Path = require(&#x27;fire-path&#x27;);
var Url = require(&#x27;fire-url&#x27;);
var Async = require(&#x27;async&#x27;);

/**
 * Global object with classes, properties and methods you can access from anywhere.
 *
 * @module Editor
 * @main Editor
 */
window.Editor = window.Editor || {};
Editor.require = function ( path ) {
    return require( Editor.url(path) );
};

// init argument list sending from core by url?queries
// format: &#x27;?foo=bar&amp;hell=world&#x27;
// skip &#x27;?&#x27;
var queryString = decodeURIComponent(location.search.substr(1));
var queryList = queryString.split(&#x27;&amp;&#x27;);
var queries = {};
for ( var i = 0; i &lt; queryList.length; ++i ) {
    var pair = queryList[i].split(&#x27;=&#x27;);
    if ( pair.length === 2) {
        queries[pair[0]] = pair[1];
    }
}
Editor.argv = queries;

// init &amp; cache remote
Editor.remote = Remote.getGlobal(&#x27;Editor&#x27;);
Editor.cwd = Editor.remote.url(&#x27;fire://&#x27;);
Editor.isDev = Editor.remote.isDev;
Editor.token = Editor.remote.token;
Editor.userInfo = Editor.remote.userInfo;

var _urlToPath = function ( base, urlInfo ) {
    if ( urlInfo.pathname ) {
        return Path.join( base, urlInfo.host, urlInfo.pathname );
    }
    return Path.join( base, urlInfo.host );
};

// url
Editor.url = function (url) {
    // NOTE: we cache editor:// protocol to get rid of ipc-sync function calls
    var urlInfo = Url.parse(url);
    if ( urlInfo.protocol === &#x27;editor:&#x27; ) {
        return _urlToPath( Editor.cwd, urlInfo );
    }

    // try ipc-sync function
    return Editor.remote.url(url);
};

Editor.JS = Fire.JS;
Editor.gizmos = {};

// ==========================
// console log API
// ==========================

Editor.log = function ( text ) {
    &#x27;use strict&#x27;;

    if ( arguments.length &lt;= 1 ) {
        text = &#x27;&#x27; + text;
    } else {
        text = Util.format.apply(Util, arguments);
    }
    console.log(text);
    Editor.sendToCore(&#x27;console:log&#x27;, text);
};
Fire.log = Editor.log;

Editor.success = function ( text ) {
    &#x27;use strict&#x27;;

    if ( arguments.length &lt;= 1 ) {
        text = &#x27;&#x27; + text;
    } else {
        text = Util.format.apply(Util, arguments);
    }
    console.log(&#x27;%c&#x27; + text, &#x27;color: green&#x27;);
    Editor.sendToCore(&#x27;console:success&#x27;, text);
};
Fire.success = Editor.success;

Editor.failed = function ( text ) {
    &#x27;use strict&#x27;;

    if ( arguments.length &lt;= 1 ) {
        text = &#x27;&#x27; + text;
    } else {
        text = Util.format.apply(Util, arguments);
    }
    console.log(&#x27;%c&#x27; + text, &#x27;color: red&#x27;);
    Editor.sendToCore(&#x27;console:failed&#x27;, text);
};
Fire.failed = Editor.failed;

Editor.info = function ( text ) {
    &#x27;use strict&#x27;;

    if ( arguments.length &lt;= 1 ) {
        text = &#x27;&#x27; + text;
    } else {
        text = Util.format.apply(Util, arguments);
    }
    console.info(text);
    Editor.sendToCore(&#x27;console:info&#x27;, text);
};
Fire.info = Editor.info;

Editor.warn = function ( text ) {
    &#x27;use strict&#x27;;

    if ( arguments.length &lt;= 1 ) {
        text = &#x27;&#x27; + text;
    } else {
        text = Util.format.apply(Util, arguments);
    }
    console.warn(text);

    var e = new Error(&#x27;dummy&#x27;);
    var lines = e.stack.split(&#x27;\n&#x27;);
    text = text + &#x27;\n&#x27; + lines.splice(2).join(&#x27;\n&#x27;);

    Editor.sendToCore(&#x27;console:warn&#x27;, text);
};
Fire.warn = Editor.warn;

Editor.error = function ( text ) {
    &#x27;use strict&#x27;;

    if ( arguments.length &lt;= 1 ) {
        text = &#x27;&#x27; + text;
    } else {
        text = Util.format.apply(Util, arguments);
    }
    console.error(text);

    var e = new Error(&#x27;dummy&#x27;);
    var lines = e.stack.split(&#x27;\n&#x27;);
    text = text + &#x27;\n&#x27; + lines.splice(2).join(&#x27;\n&#x27;);

    Editor.sendToCore(&#x27;console:error&#x27;, text);
};
Fire.error = Editor.error;

/**
 * show error stacks in editor
 * @method _throw
 * @param {Error} error
 * @private
 */
Fire._throw = function (error) {
    var info;
    if (error.stack) {
        info = Editor._SourceMap.resolveStack(error.stack);
    }
    else {
        info = error;
    }
    console.error(info);
    if (Ipc._events[&#x27;console:error&#x27;]) {
        Ipc.emit(&#x27;console:error&#x27;, info);
    }
    else {
        Editor.sendToMainWindow(&#x27;console:error&#x27;, info);
    }
};

Editor.observe = function ( target, enabled ) {
    if ( !target.isValid ) {
        return;
    }
    target._observing = enabled;
    if ( target instanceof Fire.Entity ) {
        for ( var i = 0; i &lt; target._components.length; ++i ) {
            var comp = target._components[i];
            comp._observing = enabled;
        }
    }
};

Editor.hintObjectById = function ( type, id ) {
    if ( Fire.isChildClassOf( type, Fire.Entity ) ) {
        Editor.sendToWindows(&#x27;entity:hint&#x27;, {
            &#x27;entity-id&#x27;: id
        });
    }
    else if ( Fire.isChildClassOf( type, Fire.Component ) ) {
        Editor.sendToWindows(&#x27;entity:hint&#x27;, {
            &#x27;entity-id&#x27;: id
        });
    }
    else if ( Fire.isChildClassOf( type, Fire.Asset ) ) {
        Editor.sendToWindows(&#x27;asset:hint&#x27;, {
            uuid: id
        });
    }
};

Editor.hintObject = function ( target ) {
    if ( target instanceof Fire.Entity ) {
        Editor.sendToWindows(&#x27;entity:hint&#x27;, {
            &#x27;entity-id&#x27;: target.id
        });
    }
    else if ( target instanceof Fire.Component ) {
        Editor.sendToWindows(&#x27;entity:hint&#x27;, {
            &#x27;entity-id&#x27;: target.entity.id
        });
    }
    else if ( target instanceof Fire.Asset ) {
        Editor.sendToWindows(&#x27;asset:hint&#x27;, {
            uuid: target._uuid
        });
    }
};

Editor.snapshotEntity = function ( entity ) {
    var snapshot = [];

    for ( var i = 0; i &lt; entity._components.length; ++i ) {
        var comp = entity._components[i];
        var compName = Fire.JS.getClassName(comp);
        var klass = comp.constructor;
        if (klass.__props__) {
            for (var p = 0; p &lt; klass.__props__.length; p++) {
                var propName = klass.__props__[p];
                var attrs = Fire.attr(comp, propName);

                // skip hide-in-inspector
                if ( attrs.hideInInspector ) {
                    continue;
                }

                if ( propName === &#x27;_scriptUuid&#x27; ) {
                    continue;
                }

                var value = comp[propName];
                if ( value.clone )
                    value = value.clone();

                snapshot.push({
                    component: compName,
                    property: propName,
                    value: value,
                });
            }
        }
    }

    return snapshot;
};

Editor.applyFromSnapshot = function ( entity, snapshot ) {
    for ( var i = 0; i &lt; snapshot.length; ++i ) {
        var item = snapshot[i];
        var comp = entity.getComponent(item.component);
        if ( comp ) {
            comp[item.property] = item.value;
        }
    }
};

Editor.openObjectById = function ( type, id ) {
    if ( Fire.isChildClassOf( type, Fire.Entity ) ) {
    }
    else if ( Fire.isChildClassOf( type, Fire.Component ) ) {
    }
    else if ( Fire.isChildClassOf( type, Fire.Asset ) ) {
        Editor.sendToAll(&#x27;asset:open&#x27;, {
            uuid: id,
            url: Editor.AssetDB.uuidToUrl(id),
        } );
    }
};

Editor.openObject = function ( target ) {
    if ( target instanceof Fire.Entity ) {
        // TODO:
        // Editor.sendToWindows(&#x27;scene:focus-entity&#x27;, {
        //     &#x27;entity-id&#x27;: target.id
        // } );
    }
    else if ( target instanceof Fire.Component ) {
        // TODO
        // Editor.sendToWindows(&#x27;scene:focus-entity&#x27;, {
        //     &#x27;entity-id&#x27;: target.entity.id
        // } );
    }
    else if ( target instanceof Fire.Asset ) {
        Editor.sendToAll(&#x27;asset:open&#x27;, {
            uuid: target._uuid,
            url: Editor.AssetDB.uuidToUrl(target._uuid),
        } );
    }
};

var _isBrowsing = false;
Editor.browseObject = function ( type, fobjectEL ) {
    if ( _isBrowsing )
        return;

    _isBrowsing = true;
    var ipc = new Editor.IpcListener();

    if ( Fire.isChildClassOf( type, Fire.Entity ) ) {
        Fire.warn(&#x27;TODO: ask johnny how to do this.&#x27;);
        _isBrowsing = false;
    }
    else if ( Fire.isChildClassOf( type, Fire.Component ) ) {
        Fire.warn(&#x27;TODO: ask johnny how to do this.&#x27;);
        _isBrowsing = false;
    }
    else if ( Fire.isChildClassOf( type, Fire.Asset ) ) {
        var typeID = Fire.JS._getClassId(type);

        Editor.sendToCore(&#x27;quick-view:open&#x27;, {
            &#x27;type-id&#x27;: typeID,
            &#x27;id&#x27;: fobjectEL.value ? fobjectEL.value._uuid : &#x27;&#x27;,
        });
        ipc.on(&#x27;quick-view:selected&#x27;, function ( uuid ) {
            fobjectEL.setAsset(uuid);
        });
        ipc.on(&#x27;quick-view:closed&#x27;, function () {
            _isBrowsing = false;
            ipc.clear();
        });
    }
};

Editor.serializeMeta = function ( meta ) {
    if ( !meta.subRawData ) {
        return Editor.serialize(meta);
    }

    var subUuids = meta.subRawData.map ( function ( item ) {
        var uuid = item.asset._uuid;
        item.asset._uuid = null;
        return uuid;
    });

    var json = Editor.serialize(meta);

    for ( var i = 0; i &lt; meta.subRawData.length; ++i ) {
        meta.subRawData[i].asset._uuid = subUuids[i];
    }

    return json;
};

// ==========================
// login API
// ==========================

Editor.login = function ( account, passwd, cb ) {
    return Editor.sendRequestToCore( &#x27;editor:login&#x27;, account, passwd, cb );
};

Editor.tokenLogin = function ( token, userId, cb ) {
    return Editor.sendRequestToCore( &#x27;editor:token-login&#x27;, token, userId, cb );
};

Editor.cancelLogin = function ( id ) {
    Editor.cancelRequestToCore( id );
};

Editor.logout = function ( cb ) {
    Editor.sendRequestToCore( &#x27;editor:logout&#x27;, cb );
};

// ==========================
// Layout API
// ==========================

var _layouting = false;

Editor.loadLayout = function ( anchorEL, cb ) {
    Editor.sendRequestToCore( &#x27;window:query-layout&#x27;, Editor.requireIpcEvent, function (layout) {
        if ( !layout ) {
            cb();
            return;
        }

        Editor.resetLayout( anchorEL, layout, cb );
    });
};

Editor.resetLayout = function ( anchorEL, layoutInfo, cb ) {
    _layouting = true;

    var importList = EditorUI.createLayout( anchorEL, layoutInfo );
    Async.eachSeries( importList, function ( item, done ) {
        Editor.Panel.load (item.panelID, function ( err, frameEL ) {
            if ( err ) {
                done();
                return;
            }

            var dockAt = item.dockEL;
            dockAt.add(frameEL);
            if ( item.active ) {
                dockAt.select(frameEL);
            }
            done();
        });
    }, function ( err ) {
        _layouting = false;

        // close error panels
        EditorUI.DockUtils.flushWithCollapse();
        Editor.saveLayout();
        if ( cb ) cb ();
    } );
};

Editor.saveLayout = function () {
    // don&#x27;t save layout when we are layouting
    if ( _layouting )
        return;

    window.requestAnimationFrame ( function () {
        Editor.sendToCore(&#x27;window:save-layout&#x27;, Editor.Panel.dumpLayout(), Editor.requireIpcEvent);
    });
};

// ==========================
// Ipc events
// ==========================

Ipc.on(&#x27;editor:user-info-changed&#x27;, function ( detail ) {
    Editor.token = detail.token;
    Editor.userInfo = detail[&#x27;user-info&#x27;];
});

Ipc.on( &#x27;editor:reset-layout&#x27;, function ( layoutInfo ) {
    var anchorEL = document.body;
    if ( EditorUI.DockUtils.root ) {
        anchorEL = EditorUI.DockUtils.root.parentElement;
    }

    Editor.resetLayout( anchorEL, layoutInfo, function () {
        EditorUI.DockUtils.reset();
    });
});

Ipc.on( &#x27;ipc-debugger:query&#x27;, function ( reply ) {
    var ipcInfos = [];
    for ( var p in Ipc._events ) {
        var listeners = Ipc._events[p];
        var count = Array.isArray(listeners) ? listeners.length : 1;
        ipcInfos.push({
            name: p,
            level: &#x27;page&#x27;,
            count: count,
        });
    }
    reply(ipcInfos);
});

// ==========================
// extends
// ==========================

Editor.registerPanel = function ( panelID, obj ) {
    if ( window[panelID] !== undefined ) {
        Editor.error(&#x27;Failed to register panel %s, panelID has been registered.&#x27;, panelID);
        return;
    }

    window[panelID] = Polymer(obj);
};


    </pre>
</div>
</div>
        </div>

    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/vendor/jquery.min.js"></script>
<script src="../assets/js/jquery-offscreen-trigger.js"></script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
