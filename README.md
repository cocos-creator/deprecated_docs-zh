[![Circle CI](https://circleci.com/gh/fireball-x/docs-en.svg?style=svg)](https://circleci.com/gh/fireball-x/docs-en)

# Fireball Documentation

This is Fireball Game Editor's documentation site powered by [Hexo](http://hexo.io/).

## Requirements

You need to have Nodejs 0.12+ version installed.

If you have installed Hexo cli 2.x version before, first uninstall old Hexo version:

`npm rm -g hexo`

Then start installing dependencies.

```
npm install -g gulp
npm install -g hexo-cli
npm install
```

## Get Doc Files from Fireball and modules

Fireball documentation source is managed in the following repo:

- [Fireball Docs](https://github.com/fireball-x/fireball/tree/master/docs)
- [Editor Framework](https://github.com/fireball-x/editor-framework/tree/master/docs)

This documentation site will grab docs source file from repos above using this task:

```bash
gulp copy-doc-src
```

## Preview Documentation

```bash
# use gulp task to copy over api reference pages.
gulp generate
# start hexo server
hexo s
```

## Continuous Integration

Once you push any commit to the master branch of this repo, Circle CI will go through the above process and deploy generated hexo site to github pages.

Then you can see the result at http://docs.fireball-x.com

## Contributing

### Structure

We have 2 doc source at the moment: [Fireball Docs](https://github.com/fireball-x/fireball/tree/master/docs) and [Editor Framework](https://github.com/fireball-x/editor-framework/tree/master/docs). Each resides in `source/_post/fireball` and `source/_post/editor`.

If you want to add new doc or edit existing one, please go to the doc source and submit a PR.

### Front-matter

Each markdown file should start with a YAML front-matter section to define key information of the doc:

```yaml
---
title: My Title
categories: manual
permalinks: manual/subfolder/my-doc-link
---
```

explained:
- title: this is document's title, will be wrapped in H1 tag in the page.
- categories: one of the existing categories: `manual`、`tutorial`、`api`, or a new category you created.
- permalinks: article's path without site root. **Please note `permalinks` ends with 's'. Don't add starting or trailing slash `/` to the path.**

### Images and Other Resources

We can use two ways to insert images:

- Create an issue in [Document-image repo](https://github.com/fireball-x/document-images/issues), drag the image you want to insert into the issue description or comment. Then copy the image link generated by github markdown engine.
- Upload the image to the following folder in this repo:
```
/_posts/category/subcategory/my-file.md
/_posts/category/subcategory/my-file
                              |--screenshot.png
                              |--document.pdf
```  

You need to create a folder with the same name of the doc's filename, and they should be in the same parent folder. If the permalinks of the doc is `category/subcategory/my-title`, the link to the image should be  `category/subcategory/my-title/screenshot.png`.


## Troubleshooting


 ### `[Error: Cannot find module './build/Release/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND'`

 Unknown reason for causing this issue. Reinstall local hexo with `no-optional` param to fix it:

 ```bash
 npm install hexo --no-optional
 ```

 Check https://github.com/hexojs/hexo/issues/1055
